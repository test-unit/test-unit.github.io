<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../../../../test-unit.css" type="text/css" />
    <link rel="shortcut icon" href="../../../../../favicon.ico" />
    <link rel="icon" href="../../../../../favicon.png" />
    <title>
  Module: Test::Unit::Capybara::Assertions
  
    &mdash; test-unit-capybara
  
 - test-unit-capybara</title>


  <link rel="stylesheet" href="../../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Test::Unit::Capybara::Assertions";
  relpath = '../../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
<div class="header">
  <div class="title">
    <a href="../../../../../">
      <span class="title">
  Module: Test::Unit::Capybara::Assertions
  
    &mdash; test-unit-capybara
  
</span>
      <span class="title-separator">-</span>
      <span class="title-project">test-unit</span>
    </a>
  </div>
  <ul class="other-languages">
    <li id="other-language-japanese" lang="ja" xml:lang="ja"><a href="../../../../../test-unit-capybara/ja/Test/Unit/Capybara/Assertions.html">日本語</a></li>
  </ul>
  <ul class="menu">
    <li id="menu-reference"><a href="../../../../../test-unit-capybara/en/">Reference Manual</a></li>
    <li id="menu-install"><a href="../../../../../#test-unit-capybara-install">Install</a></li>
    <li id="menu-developer"><a href="../../../../../#developer">Developers</a></li>
  </ul>
</div>

<div class="content">


      <div id="header">
        <div id="menu">
  
    <a href="../../../alphabetical_index.html">Index (A)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../Test.html" title="Test (module)">Test</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../Unit.html" title="Test::Unit (module)">Unit</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Capybara.html" title="Test::Unit::Capybara (module)">Capybara</a></span></span>
     &raquo; 
    <span class="title">Assertions</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: Test::Unit::Capybara::Assertions
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/test/unit/capybara.rb</dd>
  </dl>
  
</div>








  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#assert_all-instance_method" title="#assert_all (instance method)">#<strong>assert_all</strong>(*args)  &#x21d2; Array&lt;::Capybara::Element&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The found elements.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#assert_body-instance_method" title="#assert_body (instance method)">#<strong>assert_body</strong>(expected, options = {}) {|expected_response, actual_response| ... } &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Passes if @expected@ == @source@.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#assert_not_find-instance_method" title="#assert_not_find (instance method)">#<strong>assert_not_find</strong>(*args, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#flunk_find-instance_method" title="#flunk_find (instance method)">#<strong>flunk_find</strong>(base_node, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Fails always with Capybara::Node::Element is not found message.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="assert_all-instance_method">
  
    
      <span class="overload">#<strong>assert_all</strong>(*args)  &#x21d2; <tt>Array&lt;::Capybara::Element&gt;</tt> </span>
    
      <span class="overload">#<strong>assert_all</strong>(node, *args)  &#x21d2; <tt>Array&lt;::Capybara::Element&gt;</tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns The found elements.</p>


  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">#<strong>assert_all</strong>(*args)  &#x21d2; <tt>Array&lt;::Capybara::Element&gt;</tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Passes if the selector finds one or more elements
from the current node.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>Pass case</p>
</div></p>
      
      <pre class="example code"><code><span class='comment'># Actual response:
</span><span class='comment'>#   &lt;html&gt;
</span><span class='comment'>#     &lt;body&gt;
</span><span class='comment'>#       &lt;h1&gt;Hello&lt;/h1&gt;
</span><span class='comment'>#       &lt;h2&gt;Yay!&lt;/h2&gt;
</span><span class='comment'>#       &lt;div class=&quot;section&quot;&gt;
</span><span class='comment'>#         &lt;h2&gt;World&lt;/h2&gt;
</span><span class='comment'>#       &lt;/div&gt;
</span><span class='comment'>#     &lt;/body&gt;
</span><span class='comment'>#   &lt;/html&gt;
</span><span class='id identifier rubyid_h2_elements'>h2_elements</span> <span class='op'>=</span> <span class='id identifier rubyid_assert_page_all'>assert_page_all</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>h2</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_h2_elements'>h2_elements</span>
  <span class='comment'># =&gt; [#&lt;Capybara::Element tag=&quot;h2&quot; path=&quot;/html/body/h2&quot;&gt;,
</span>  <span class='comment'>#     #&lt;Capybara::Element tag=&quot;h2&quot; path=&quot;/html/body/div/h2&quot;&gt;]</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Failure case</p>
</div></p>
      
      <pre class="example code"><code><span class='comment'># Actual response:
</span><span class='comment'>#   &lt;html&gt;
</span><span class='comment'>#     &lt;body&gt;
</span><span class='comment'>#       &lt;h1&gt;Hello&lt;/h1&gt;
</span><span class='comment'>#       &lt;h2&gt;Yay!&lt;/h2&gt;
</span><span class='comment'>#       &lt;div class=&quot;section&quot;&gt;
</span><span class='comment'>#         &lt;h2&gt;World&lt;/h2&gt;
</span><span class='comment'>#       &lt;/div&gt;
</span><span class='comment'>#     &lt;/body&gt;
</span><span class='comment'>#   &lt;/html&gt;
</span><span class='id identifier rubyid_assert_page_all'>assert_page_all</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>h3</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span></code></pre>
    
  </div>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>assert_all</strong>(node, *args)  &#x21d2; <tt>Array&lt;::Capybara::Element&gt;</tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Passes if the selector finds one or more elements
from @node@.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>Pass case (simple)</p>
</div></p>
      
      <pre class="example code"><code><span class='comment'># Actual response:
</span><span class='comment'>#   &lt;html&gt;
</span><span class='comment'>#     &lt;body&gt;
</span><span class='comment'>#       &lt;h1&gt;Hello&lt;/h1&gt;
</span><span class='comment'>#       &lt;h2&gt;Yay!&lt;/h2&gt;
</span><span class='comment'>#       &lt;div class=&quot;section&quot;&gt;
</span><span class='comment'>#         &lt;h2&gt;World&lt;/h2&gt;
</span><span class='comment'>#       &lt;/div&gt;
</span><span class='comment'>#     &lt;/body&gt;
</span><span class='comment'>#   &lt;/html&gt;
</span><span class='id identifier rubyid_section'>section</span> <span class='op'>=</span> <span class='id identifier rubyid_assert_find'>assert_find</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>div.section</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_section'>section</span>
  <span class='comment'># =&gt; #&lt;Capybara::Element tag=&quot;h2&quot; path=&quot;/html/body/div&quot;&gt;
</span><span class='id identifier rubyid_h2_elements'>h2_elements</span> <span class='op'>=</span> <span class='id identifier rubyid_assert_all'>assert_all</span><span class='lparen'>(</span><span class='id identifier rubyid_section'>section</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>h2</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_h2_elements'>h2_elements</span>
  <span class='comment'># =&gt; [#&lt;Capybara::Element tag=&quot;h2&quot; path=&quot;/html/body/div/h2&quot;&gt;]</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>node</span>
      
      
        <span class='type'>(<tt><span class='object_link'>::Capybara::Node::Base</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The target node.</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
  </ul>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>args</span>
      
      
        <span class='type'>(<tt>...</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>(see Capybara::Node::Finders#all)</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;::Capybara::Element&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The found elements.</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>Capybara::Node::Finders#all</li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/test/unit/capybara.rb', line 283</span>

<span class='kw'>def</span> <span class='id identifier rubyid_assert_all'>assert_all</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_node'>node</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_node'>node</span> <span class='op'>=</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_shift'>shift</span> <span class='kw'>if</span> <span class='id identifier rubyid_args'>args</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='op'>::</span><span class='const'>Capybara</span><span class='op'>::</span><span class='const'>Node</span><span class='op'>::</span><span class='const'>Base</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_args'>args</span> <span class='op'>=</span> <span class='id identifier rubyid_normalize_page_finder_arguments'>normalize_page_finder_arguments</span><span class='lparen'>(</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_format'>format</span> <span class='op'>=</span> <span class='heredoc_beg'>&lt;&lt;-EOT</span>
<span class='tstring_content'>&lt;?&gt;(?) expected to find one or more elements in
&lt;?&gt;
</span><span class='heredoc_end'>EOT
</span>  <span class='id identifier rubyid_current_context'>current_context</span> <span class='op'>=</span> <span class='id identifier rubyid_node'>node</span> <span class='op'>||</span> <span class='id identifier rubyid_page'>page</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='symbol'>:current_scope</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_current_context_source'>current_context_source</span> <span class='op'>=</span> <span class='id identifier rubyid_node_source'>node_source</span><span class='lparen'>(</span><span class='id identifier rubyid_current_context'>current_context</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_source_in_message'>source_in_message</span> <span class='op'>=</span> <span class='const'>AssertionMessage</span><span class='period'>.</span><span class='id identifier rubyid_literal'>literal</span><span class='lparen'>(</span><span class='id identifier rubyid_current_context_source'>current_context_source</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_full_message'>full_message</span> <span class='op'>=</span> <span class='id identifier rubyid_build_message'>build_message</span><span class='lparen'>(</span><span class='id identifier rubyid_args'>args</span><span class='lbracket'>[</span><span class='symbol'>:message</span><span class='rbracket'>]</span><span class='comma'>,</span>
                               <span class='id identifier rubyid_format'>format</span><span class='comma'>,</span>
                               <span class='id identifier rubyid_args'>args</span><span class='lbracket'>[</span><span class='symbol'>:locator</span><span class='rbracket'>]</span><span class='comma'>,</span>
                               <span class='id identifier rubyid_args'>args</span><span class='lbracket'>[</span><span class='symbol'>:kind</span><span class='rbracket'>]</span><span class='comma'>,</span>
                               <span class='id identifier rubyid_source_in_message'>source_in_message</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_node'>node</span>
    <span class='id identifier rubyid_elements'>elements</span> <span class='op'>=</span> <span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_all'>all</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='lbracket'>[</span><span class='symbol'>:finder_arguments</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_elements'>elements</span> <span class='op'>=</span> <span class='id identifier rubyid_all'>all</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='lbracket'>[</span><span class='symbol'>:finder_arguments</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_assert_block'>assert_block</span><span class='lparen'>(</span><span class='id identifier rubyid_full_message'>full_message</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='kw'>not</span> <span class='id identifier rubyid_elements'>elements</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_elements'>elements</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="assert_body-instance_method">
  
    #<strong>assert_body</strong>(expected, options = {}) {|expected_response, actual_response| ... } &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Passes if @expected@ == @<a href="mailto:source@">source@</a>. @source@ is a
method provided by Capybara::DSL.</p>

<p>@source@ may be parsed depended on response
Content-Type before comparing. Here are parsed
Content-Types:</p>

<ul>
<li>@&quot;application/json&quot;@ := It&#39;s parsed by @<a href="mailto:JSON.parse@">JSON.parse@</a>.</li>
</ul>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>Pass case</p>
</div></p>
      
      <pre class="example code"><code><span class='comment'># Actual response:
</span><span class='comment'>#   Content-Type: application/json
</span><span class='comment'>#   Body: {&quot;status&quot;: true}
</span><span class='id identifier rubyid_assert_body'>assert_body</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>status</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='symbol'>:content_type</span> <span class='op'>=&gt;</span> <span class='symbol'>:json</span><span class='rparen'>)</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Failure case</p>
</div></p>
      
      <pre class="example code"><code><span class='comment'># Actual response:
</span><span class='comment'>#   Content-Type: text/html
</span><span class='comment'>#   Body: &lt;html&gt;&lt;body&gt;Hello&lt;/body&gt;&lt;/html&gt;
</span><span class='id identifier rubyid_assert_body'>assert_body</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;html&gt;&lt;body&gt;World&lt;/body&gt;&lt;/html&gt;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>expected</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the expected body
content. The actual body may be parsed. It
depends on @:content_type@ option.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>a customizable set of options</p>
</div>
      
    </li>
  
</ul>

  
    
    
    
    
    <p class="tag_title">Options Hash (<tt>options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:content_type</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          
            &mdash; <div class='inline'><p>the expected Content-Type. If this value is @nil@,
Content-Type will not be compared.</p>

<p>This value can be specified by abbreviated. Here
are abbreviations:</p>

<ul>
<li>@:json@ := @&quot;application/json&quot;@</li>
</ul>
</div>
          
        </li>
      
    </ul>
  

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>expected_response</tt>, <tt>actual_response</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the
optional compared responses normalizer.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>expected_response</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the expected
response constructed in the method.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>actual_response</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the actual
response constructed in the method.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Returns:</p>
<ul class="yieldreturn">
  
    <li>
      
      
        <span class='type'>(<tt>expected_response</tt>, <tt>actual_response</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the
normalized compared responses.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/test/unit/capybara.rb', line 203</span>

<span class='kw'>def</span> <span class='id identifier rubyid_assert_body'>assert_body</span><span class='lparen'>(</span><span class='id identifier rubyid_expected'>expected</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_content_type'>content_type</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:content_type</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_actual_response'>actual_response</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='symbol'>:content_type</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_page_content_type'>page_content_type</span><span class='comma'>,</span>
    <span class='symbol'>:body</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_parsed_page_body'>parsed_page_body</span><span class='comma'>,</span>
  <span class='rbrace'>}</span>
  <span class='id identifier rubyid_expected_response'>expected_response</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='symbol'>:body</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_expected'>expected</span><span class='rbrace'>}</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_content_type'>content_type</span>
    <span class='id identifier rubyid_expected_response'>expected_response</span><span class='lbracket'>[</span><span class='symbol'>:content_type</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_normalize_content_type'>normalize_content_type</span><span class='lparen'>(</span><span class='id identifier rubyid_content_type'>content_type</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_actual_response'>actual_response</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='symbol'>:content_type</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='id identifier rubyid_expected_response'>expected_response</span><span class='comma'>,</span> <span class='id identifier rubyid_actual_response'>actual_response</span> <span class='op'>=</span> <span class='kw'>yield</span><span class='lparen'>(</span><span class='id identifier rubyid_expected_response'>expected_response</span><span class='comma'>,</span>
                                               <span class='id identifier rubyid_actual_response'>actual_response</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_assert_equal'>assert_equal</span><span class='lparen'>(</span><span class='id identifier rubyid_expected_response'>expected_response</span><span class='comma'>,</span> <span class='id identifier rubyid_actual_response'>actual_response</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="assert_not_find-instance_method">
  
    
      <span class="overload">#<strong>assert_not_find</strong>(*args, &amp;block)  &#x21d2; <tt>Object</tt> </span>
    
      <span class="overload">#<strong>assert_not_find</strong>(node, *args, &amp;block)  &#x21d2; <tt>Object</tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">#<strong>assert_not_find</strong>(*args, &amp;block)  &#x21d2; <tt>Object</tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Passes if the selector doesn&#39;t find any elements
from the current node.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>Pass case</p>
</div></p>
      
      <pre class="example code"><code><span class='comment'># Actual response:
</span><span class='comment'>#   &lt;html&gt;
</span><span class='comment'>#     &lt;body&gt;
</span><span class='comment'>#       &lt;h1&gt;Hello&lt;/h1&gt;
</span><span class='comment'>#       &lt;h2&gt;Yay!&lt;/h2&gt;
</span><span class='comment'>#       &lt;div class=&quot;section&quot;&gt;
</span><span class='comment'>#         &lt;h2&gt;World&lt;/h2&gt;
</span><span class='comment'>#       &lt;/div&gt;
</span><span class='comment'>#     &lt;/body&gt;
</span><span class='comment'>#   &lt;/html&gt;
</span><span class='id identifier rubyid_assert_not_find'>assert_not_find</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>h3</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Failure case</p>
</div></p>
      
      <pre class="example code"><code><span class='comment'># Actual response:
</span><span class='comment'>#   &lt;html&gt;
</span><span class='comment'>#     &lt;body&gt;
</span><span class='comment'>#       &lt;h1&gt;Hello&lt;/h1&gt;
</span><span class='comment'>#       &lt;h2&gt;Yay!&lt;/h2&gt;
</span><span class='comment'>#       &lt;div class=&quot;section&quot;&gt;
</span><span class='comment'>#         &lt;h2&gt;World&lt;/h2&gt;
</span><span class='comment'>#       &lt;/div&gt;
</span><span class='comment'>#     &lt;/body&gt;
</span><span class='comment'>#   &lt;/html&gt;
</span><span class='id identifier rubyid_assert_not_find'>assert_not_find</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>h1</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span></code></pre>
    
  </div>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>assert_not_find</strong>(node, *args, &amp;block)  &#x21d2; <tt>Object</tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Passes if the selector doesn&#39;t find any element from @node@.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>Pass case</p>
</div></p>
      
      <pre class="example code"><code><span class='comment'># Actual response:
</span><span class='comment'>#   &lt;html&gt;
</span><span class='comment'>#     &lt;body&gt;
</span><span class='comment'>#       &lt;h1&gt;Hello&lt;/h1&gt;
</span><span class='comment'>#       &lt;h2&gt;Yay!&lt;/h2&gt;
</span><span class='comment'>#       &lt;div class=&quot;section&quot;&gt;
</span><span class='comment'>#         &lt;h2&gt;World&lt;/h2&gt;
</span><span class='comment'>#       &lt;/div&gt;
</span><span class='comment'>#     &lt;/body&gt;
</span><span class='comment'>#   &lt;/html&gt;
</span><span class='id identifier rubyid_section'>section</span> <span class='op'>=</span> <span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>section</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_section'>section</span>
  <span class='comment'># =&gt; #&lt;Capybara::Element tag=&quot;h2&quot; path=&quot;/html/body/div&quot;&gt;
</span><span class='id identifier rubyid_assert_not_find'>assert_not_find</span><span class='lparen'>(</span><span class='id identifier rubyid_section'>section</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>h1</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Failure case</p>
</div></p>
      
      <pre class="example code"><code><span class='comment'># Actual response:
</span><span class='comment'>#   &lt;html&gt;
</span><span class='comment'>#     &lt;body&gt;
</span><span class='comment'>#       &lt;h1&gt;Hello&lt;/h1&gt;
</span><span class='comment'>#       &lt;h2&gt;Yay!&lt;/h2&gt;
</span><span class='comment'>#       &lt;div class=&quot;section&quot;&gt;
</span><span class='comment'>#         &lt;h2&gt;World&lt;/h2&gt;
</span><span class='comment'>#       &lt;/div&gt;
</span><span class='comment'>#     &lt;/body&gt;
</span><span class='comment'>#   &lt;/html&gt;
</span><span class='id identifier rubyid_section'>section</span> <span class='op'>=</span> <span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>section</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_section'>section</span>
  <span class='comment'># =&gt; #&lt;Capybara::Element tag=&quot;h2&quot; path=&quot;/html/body/div&quot;&gt;
</span><span class='id identifier rubyid_assert_not_find'>assert_not_find</span><span class='lparen'>(</span><span class='id identifier rubyid_section'>section</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>h2</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>node</span>
      
      
        <span class='type'>(<tt><span class='object_link'>::Capybara::Node::Base</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The target node.</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
  </ul>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>args</span>
      
      
        <span class='type'>(<tt>...</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>(see Capybara::Node::Finders#find)</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>Capybara::Node::Finders#find</li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/test/unit/capybara.rb', line 380</span>

<span class='kw'>def</span> <span class='id identifier rubyid_assert_not_find'>assert_not_find</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_node'>node</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_node'>node</span> <span class='op'>=</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_shift'>shift</span> <span class='kw'>if</span> <span class='id identifier rubyid_args'>args</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='op'>::</span><span class='const'>Capybara</span><span class='op'>::</span><span class='const'>Node</span><span class='op'>::</span><span class='const'>Base</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_args'>args</span> <span class='op'>=</span> <span class='id identifier rubyid_normalize_page_finder_arguments'>normalize_page_finder_arguments</span><span class='lparen'>(</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='kw'>begin</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_node'>node</span>
      <span class='id identifier rubyid_element'>element</span> <span class='op'>=</span> <span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='lbracket'>[</span><span class='symbol'>:finder_arguments</span><span class='rbracket'>]</span><span class='comma'>,</span>
                           <span class='op'>**</span><span class='id identifier rubyid_args'>args</span><span class='lbracket'>[</span><span class='symbol'>:finder_options</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_element'>element</span> <span class='op'>=</span> <span class='id identifier rubyid_first'>first</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='lbracket'>[</span><span class='symbol'>:finder_arguments</span><span class='rbracket'>]</span><span class='comma'>,</span>
                      <span class='op'>**</span><span class='id identifier rubyid_args'>args</span><span class='lbracket'>[</span><span class='symbol'>:finder_options</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>rescue</span> <span class='op'>::</span><span class='const'>Capybara</span><span class='op'>::</span><span class='const'>ExpectationNotMet</span>
    <span class='id identifier rubyid_element'>element</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_format'>format</span> <span class='op'>=</span> <span class='heredoc_beg'>&lt;&lt;-EOT</span>
<span class='tstring_content'>&lt;?&gt;(?) expected to not find an element but was
&lt;?&gt; in
&lt;?&gt;
</span><span class='heredoc_end'>EOT
</span>  <span class='id identifier rubyid_element_source'>element_source</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_element_source'>element_source</span> <span class='op'>=</span> <span class='id identifier rubyid_node_source'>node_source</span><span class='lparen'>(</span><span class='id identifier rubyid_element'>element</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_element'>element</span>
  <span class='id identifier rubyid_current_context'>current_context</span> <span class='op'>=</span> <span class='id identifier rubyid_node'>node</span> <span class='op'>||</span> <span class='id identifier rubyid_page'>page</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='symbol'>:current_scope</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_current_context_source'>current_context_source</span> <span class='op'>=</span> <span class='id identifier rubyid_node_source'>node_source</span><span class='lparen'>(</span><span class='id identifier rubyid_current_context'>current_context</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_source_in_message'>source_in_message</span> <span class='op'>=</span> <span class='const'>AssertionMessage</span><span class='period'>.</span><span class='id identifier rubyid_literal'>literal</span><span class='lparen'>(</span><span class='id identifier rubyid_current_context_source'>current_context_source</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_full_message'>full_message</span> <span class='op'>=</span> <span class='id identifier rubyid_build_message'>build_message</span><span class='lparen'>(</span><span class='id identifier rubyid_args'>args</span><span class='lbracket'>[</span><span class='symbol'>:message</span><span class='rbracket'>]</span><span class='comma'>,</span>
                               <span class='id identifier rubyid_format'>format</span><span class='comma'>,</span>
                               <span class='id identifier rubyid_args'>args</span><span class='lbracket'>[</span><span class='symbol'>:locator</span><span class='rbracket'>]</span><span class='comma'>,</span>
                               <span class='id identifier rubyid_args'>args</span><span class='lbracket'>[</span><span class='symbol'>:kind</span><span class='rbracket'>]</span><span class='comma'>,</span>
                               <span class='const'>AssertionMessage</span><span class='period'>.</span><span class='id identifier rubyid_literal'>literal</span><span class='lparen'>(</span><span class='id identifier rubyid_element_source'>element_source</span><span class='rparen'>)</span><span class='comma'>,</span>
                               <span class='id identifier rubyid_source_in_message'>source_in_message</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_assert_block'>assert_block</span><span class='lparen'>(</span><span class='id identifier rubyid_full_message'>full_message</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_element'>element</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="flunk_find-instance_method">
  
    #<strong>flunk_find</strong>(base_node, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Fails always with Capybara::Node::Element is not
found message.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>base_node</span>
      
      
        <span class='type'>(<tt>::Capybara::Node::Element</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The
node used as search target.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>a customizable set of options</p>
</div>
      
    </li>
  
</ul>

  
    
    
    
    
    <p class="tag_title">Options Hash (<tt>options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:message</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>The user custom
message added to failure message.</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:locator</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>The query used to
find a node.</p>

<p>It should be specified for useful failure message.</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:kind</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>The kind of query.</p>

<p>It should be specified for useful failure message.</p>
</div>
          
        </li>
      
    </ul>
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


430
431
432
433
434
435
436
437
438
439
440
441
442
443
444</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/test/unit/capybara.rb', line 430</span>

<span class='kw'>def</span> <span class='id identifier rubyid_flunk_find'>flunk_find</span><span class='lparen'>(</span><span class='id identifier rubyid_base_node'>base_node</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_format'>format</span> <span class='op'>=</span> <span class='heredoc_beg'>&lt;&lt;-EOT</span>
<span class='tstring_content'>&lt;?&gt;(?) expected to find an element in
&lt;?&gt;
</span><span class='heredoc_end'>EOT
</span>  <span class='id identifier rubyid_base_html'>base_html</span> <span class='op'>=</span> <span class='const'>AssertionMessage</span><span class='period'>.</span><span class='id identifier rubyid_literal'>literal</span><span class='lparen'>(</span><span class='id identifier rubyid_node_source'>node_source</span><span class='lparen'>(</span><span class='id identifier rubyid_base_node'>base_node</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_full_message'>full_message</span> <span class='op'>=</span> <span class='id identifier rubyid_build_message'>build_message</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:message</span><span class='rbracket'>]</span><span class='comma'>,</span>
                               <span class='id identifier rubyid_format'>format</span><span class='comma'>,</span>
                               <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:locator</span><span class='rbracket'>]</span><span class='comma'>,</span>
                               <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:kind</span><span class='rbracket'>]</span><span class='comma'>,</span>
                               <span class='id identifier rubyid_base_html'>base_html</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_assert_block'>assert_block</span><span class='lparen'>(</span><span class='id identifier rubyid_full_message'>full_message</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='kw'>false</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
    </div>

    <div class="sponsors">
      <p id="sponsor-github">
        <a href="https://github.com/test-unit/">
          <img src="../../../../../github-logo.png" width="100" height="45" border="0" alt="The test-unit project uses GitHub's git repositories." />
        </a>
      </p>
      <p id="sponsor-tango">
	<a href="http://tango.freedesktop.org/">
          <img width="120" height="53" border="0" alt="Tango Desktop Project's icons are used." src="../../../../../tango-logo.png" />
        </a>
      </p>
      <p id="sponsor-famfamfam">
	<a href="http://www.famfamfam.com/">
          <img width="120" height="18" border="0" alt="famfamfam.com's flags are used." src="../../../../../famfamfam-logo.png" />
        </a>
      </p>
      <p id="sponsor-famfamfam">
	<a href="http://www.famfamfam.com/">
          <img width="120" height="18" border="0" alt="famfamfam.com's flags are used." src="../../../../../famfamfam-logo.png" />
        </a>
      </p>

<!-- Piwik -->
<a href="http://piwik.org" title="Web analytics" onclick="window.open(this.href);return(false);">
<script type="text/javascript">
var pkBaseURL = (("https:" == document.location.protocol) ? "https://www.clear-code.com/piwik/" : "http://www.clear-code.com/piwik/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
piwik_action_name = '';
piwik_idsite = 2;
piwik_url = pkBaseURL + "piwik.php";
piwik_log(piwik_action_name, piwik_idsite, piwik_url);
</script>
<object><noscript><p>Web analytics <img src="http://www.clear-code.com/piwik/piwik.php?idsite=2" style="border:0" alt=""/></p></noscript></object></a>
<!-- End Piwik Tag -->
    </div>

</div>
  </body>
</html>